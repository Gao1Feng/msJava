# Ajax

## 1. 什么是Ajax？

> Ajax 就是 JavaScript 基于 **XMLHttpRequest** 对象与服务端进行交互，向服务端发送一个请求，并且获取和处理服务器返回的内容。在这个过程中，我们可以使用 XML ，HTML 和 JSON 等格式的数据进行交互。并且，Ajax 拥有**异步**特质，我们可以在不刷新页面的情况下，通过交互数据，在页面上做局部的刷新等数据处理。

## 2.Ajax工作原理

**Ajax 工作过程大致如下：**

1. **JavaScript 通过 XMLHttpRequest 向后端发起异步请求，可以是 get 或者 post 等；**
2. **服务端接收请求，处理并返回数据；**
3. **JavaScript 通过 XMLHttpRequest 获取并解析服务端返回的数据内容；**
4. **JavaScript 通过动态更新 DOM 或者执行其他操作。**

## 3.Ajax的优缺点

**优点：**

- **无刷新更新页面**。抛弃了早期重载页面的方式，加快了请求的速度，提升了用户体验。
- **减少客户端的内存消耗**。采用更加轻量的数据提取做法，避免了客户端大量的冗余请求，减少了不必要的内存消耗。
- **将部分传统技术中原本在服务端的工作转移到客户端来进行。** 使用Ajax，一些数据的处理能够在客户端进行，减轻了服务端的压力。
- **兼容性极好，几乎所有的浏览器都支持**。不需要额外插件或者虚拟机即可使用。

**缺点：**

- **破坏浏览器的后退与加入收藏书签功能**。这也是为大家所诟病的一点，因为通过 Ajax 进行页面动态更新，用户无法回到上一页的状态。
- **网络延迟造成用户体验差**。在请求到响应的这段时间，可长可短，在网络延迟的情况下，留给用户的就是一个页面无反应，造成的结果可能是用户的体验极差。解决这个问题一般是提供一个 Loading 组件告诉用户正在等待。
- **Ajax 造成的竞态关系**。当然这也不是 Ajax 的锅，异步本身就会有这个问题。假设多个 Ajax 同时更新到同一个数据，那么这个数据是按照什么规则更新呢？这就需要我们对竞态进行一定的考量和规范了。

